import{j as p,r as l,R as b,a as v}from"./vendor.1175d6e6.js";const S=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}};S();const e=p.exports.jsx,c=p.exports.jsxs;function w({checked:r,onChange:s}){const n=l.exports.useRef(null);function i(){if(n.current){let t=n.current.checked;n.current.checked=!t,s(!t)}}return l.exports.useEffect(()=>{n.current&&(n.current.checked=r)},[r]),c("div",{className:"toggle",onClick:i,children:[e("input",{type:"checkbox",name:"themeSwitchCheck",ref:n}),e("span",{className:"checked"})]})}function T(){const[r,s]=l.exports.useState(!1);function n(t){const a=t?"dark":"light";document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a),s(a==="dark")}function i(){const t=localStorage.getItem("theme");t&&(document.documentElement.setAttribute("data-theme",t),t==="dark"&&s(!0))}return l.exports.useEffect(()=>{i()},[]),c("div",{className:"theme-switch",children:[e("label",{htmlFor:"themeSwitchCheck",children:"Dark Mode"}),e(w,{onChange:n,checked:r})]})}var j="/last-fm-trending-tracks/assets/logo.e85de2d8.svg";function E(){return e("div",{className:"header",children:c("div",{className:"header-inner",children:[c("div",{className:"header-logo",children:[e("img",{src:j,alt:"logo"}),c("div",{className:"title",children:[e("h1",{children:"Trending"}),e("span",{className:"subtitle",children:"Tracks"})]})]}),e("div",{className:"header-search",children:e("input",{type:"text",placeholder:"Search"})}),e(T,{})]})})}function P(r){const s=parseInt(r),n=Math.floor(s/6e4),i=(s%6e4/1e3).toFixed(0);return`${n}:${i}`}function C(r,s){return r/s*100}function I({progress:r}){return e("div",{className:"progress-bar",children:e("div",{className:"progress-bar-inner",style:{width:`${r}%`}})})}function M({track:r,index:s,max:n}){return e("li",{children:c("div",{className:"track-inner",children:[e("span",{className:"track-index",children:s+1}),e("span",{className:"track-img",children:e("img",{className:"img-track",src:r.image[1]["#text"],alt:r.name})}),c("span",{className:"track-details",children:[e("span",{className:"track-name",children:r.name}),e("a",{href:r.artist.url,target:"_blank",className:"track-artist",children:r.artist.name})]}),c("span",{className:"track-popularity",children:[e(I,{progress:C(parseInt(r.listeners),n)}),e("p",{children:r.listeners})]}),e("span",{className:"track-time",children:P(r.duration)})]})})}function O(){const[r,s]=l.exports.useState([]),[n,i]=l.exports.useState(null),[t,a]=l.exports.useState(null);let[o,f]=l.exports.useState(0);async function g(){const m={apiKey:"f21088bf9097b49ad4e7f487abab981e",apiSecret:"7ccaec2093e33cded282ec7bc81c6fca"};try{const k=await(await fetch(`https://ws.audioscrobbler.com/2.0/?method=chart.gettoptracks&api_key=${m.apiKey}&format=json`,{})).json(),{tracks:{track:h,"@attr":N}}=k,x=[...h].map(u=>parseInt(u.listeners)).reduce((u,y)=>Math.max(u,y));f(x),s(h||[]),i(N||null),a(null)}catch(d){s([]),a(d)}}return l.exports.useEffect(()=>{g()},[]),c("div",{className:"App",children:[e(E,{}),t?e("pre",{children:JSON.stringify(t)}):c("ul",{className:"tracks",children:[e("li",{children:c("div",{className:"track-inner track-header",children:[e("span",{className:"track-index",children:"#"}),e("span",{className:"track-img"}),e("span",{className:"track-details",children:"Details"}),e("span",{className:"track-popularity",children:"Popularity"}),e("span",{className:"track-time",children:"time"})]})}),r.map((m,d)=>e(M,{track:m,index:d,max:o},d))]})]})}b.render(e(v.StrictMode,{children:e(O,{})}),document.getElementById("root"));
